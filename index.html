<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <title>Caixa Freitas v8.5</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <style>
    :root{--primary:#4a1a2e;--primary-dark:#2d0f1c;--error:#E53935;--warning:#FF9800;--success:#28a745;--text:#2c3e50;--text-light:#6c757d;--border:#dee2e6;--shadow:0 2px 8px rgba(0,0,0,0.08);--radius:12px;--radius-sm:8px;--spacing:16px}*{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;touch-action:manipulation;user-select:none;-webkit-user-select:none}html{height:100vh;overflow:hidden;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;touch-action:manipulation}body{font-family:'Inter',-apple-system,BlinkMacSystemFont,sans-serif;background:linear-gradient(135deg,#f1f3f4 0%,#e8eaf6 100%);color:var(--text);overflow:hidden;height:100vh;position:fixed;width:100%;display:flex;flex-direction:column;-webkit-user-select:none;user-select:none;touch-action:pan-y}button,input,select,textarea{touch-action:manipulation;user-select:none;-webkit-user-select:none}button{cursor:pointer;transition:transform .1s ease}button:active{transform:scale(0.95)}.turn-selection{position:fixed;inset:0;background:linear-gradient(135deg,var(--primary),var(--primary-dark));display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:1000;color:white;padding:20px}.turn-logo{width:80px;height:80px;background:white;border-radius:20px;display:flex;align-items:center;justify-content:center;font-size:2.5rem;font-weight:bold;color:var(--primary);margin-bottom:20px}.turn-title{font-size:1.8rem;font-weight:700;margin-bottom:12px;text-align:center}.turn-subtitle{font-size:1rem;opacity:.9;margin-bottom:30px;text-align:center}.turn-buttons{display:flex;gap:20px;flex-wrap:wrap;justify-content:center}.turn-btn{background:rgba(255,255,255,0.2);border:2px solid rgba(255,255,255,0.3);color:white;padding:18px 24px;border-radius:var(--radius);font-size:1.1rem;font-weight:700;cursor:pointer;backdrop-filter:blur(10px);display:flex;align-items:center;gap:12px;min-width:160px;justify-content:center}.turn-btn:active{background:rgba(255,255,255,0.3);transform:scale(0.95)}#mainApp{display:none;flex-direction:column;height:100vh}.header{background:linear-gradient(135deg,var(--primary),var(--primary-dark));color:white;padding:10px var(--spacing);box-shadow:0 2px 10px rgba(74,26,46,0.2);border-radius:0 0 16px 16px;flex-shrink:0;text-align:center}.header h1{font-size:1.4rem;font-weight:700;margin:0}.turno-info{font-size:.75rem;opacity:.95;display:flex;align-items:center;justify-content:center;gap:4px;background:rgba(255,255,255,0.15);padding:3px 8px;border-radius:10px;margin-top:6px}.container{max-width:420px;margin:0 auto;padding:8px;flex:1;overflow:hidden;display:flex;flex-direction:column;gap:8px;min-height:0}.card{background:white;border-radius:var(--radius);padding:12px;box-shadow:var(--shadow);border:1px solid rgba(255,255,255,0.8);flex-shrink:0}.section-title{font-size:.95rem;font-weight:700;margin-bottom:10px;color:var(--text);display:flex;align-items:center;gap:6px}.products-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}.product-btn{background:linear-gradient(135deg,var(--primary),var(--primary-dark));color:white;border:none;border-radius:var(--radius);padding:16px 12px;font-size:.9rem;font-weight:600;box-shadow:0 2px 8px rgba(74,26,46,0.2);min-height:65px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px}.product-btn .price{font-size:.75rem;opacity:.9;font-weight:500}.others-btn{background:linear-gradient(135deg,var(--warning),#F57C00);position:relative}.others-btn::after{content:'+';position:absolute;top:6px;right:10px;font-size:1.1rem;font-weight:bold}.summary-section{flex:1;display:flex;flex-direction:column;min-height:0}.summary-list{min-height:120px;max-height:200px;overflow-y:auto;margin-bottom:10px;border:1px solid var(--border);border-radius:var(--radius-sm);padding:6px}.summary-item{display:grid;grid-template-columns:1fr auto auto;align-items:center;gap:8px;padding:10px;margin-bottom:4px;background:linear-gradient(135deg,#f8f9fa,#e9ecef);border-radius:var(--radius-sm);cursor:pointer;border:1px solid rgba(0,0,0,0.05)}.summary-item:active{background:linear-gradient(135deg,#e3f2fd,#bbdefb);transform:scale(0.98)}.summary-item.is-others{background:linear-gradient(135deg,#fff9c4,#fff59d);border-color:rgba(255,152,0,0.2)}.item-info{display:flex;flex-direction:column;gap:2px}.item-label{font-weight:600;font-size:.85rem}.item-quantity{font-size:.75rem;color:var(--text-light);font-weight:500}.item-price{font-weight:700;color:var(--primary);font-size:.9rem}.delete-btn{background:none;border:none;color:var(--error);padding:8px;border-radius:50%;width:32px;height:32px;font-size:.85rem;z-index:10}.delete-btn:active{background:#ffebee;transform:scale(1.1)}.empty-cart{text-align:center;padding:20px 10px;color:var(--text-light)}.empty-cart i{font-size:2.2rem;margin-bottom:8px;opacity:.4}.total-amount{font-size:1.4rem;font-weight:800;color:var(--primary);text-align:center;margin-bottom:12px;border:2px solid var(--primary);border-radius:var(--radius);padding:10px;background:linear-gradient(135deg,#fff,#f8f9fa)}.payment-methods{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:12px}.payment-btn{background:linear-gradient(135deg,#ffffff,#f1f3f4);color:var(--text);border:2px solid var(--border);border-radius:var(--radius);padding:12px;font-weight:600;display:flex;align-items:center;justify-content:center;gap:6px;box-shadow:var(--shadow);font-size:.9rem;min-height:50px}.payment-btn.selected{background:linear-gradient(135deg,var(--success),#218838);color:white;border-color:var(--success);transform:scale(1.02);box-shadow:0 4px 15px rgba(40,167,69,0.3)}.payment-btn:active:not(.selected){background:linear-gradient(135deg,#e3f2fd,#bbdefb);transform:scale(0.98)}.received-section{margin-bottom:12px;opacity:0;transform:translateY(-10px);transition:all .3s ease;display:none}.received-section.show{opacity:1;transform:translateY(0);display:block}.received-input{width:100%;padding:12px;font-size:1.2rem;border:2px solid var(--border);border-radius:var(--radius);text-align:center;background:linear-gradient(135deg,#fff9c4,#fff59d);font-weight:700;cursor:pointer;box-shadow:var(--shadow)}.change-amount{text-align:center;font-size:1.1rem;font-weight:700;color:var(--success);margin-top:8px;display:none}.action-buttons{display:grid;grid-template-columns:2fr 1fr 1fr;gap:10px;margin-bottom:12px}.action-buttons-row2{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:10px}.action-btn{padding:12px 10px;border:none;border-radius:var(--radius);font-size:.85rem;font-weight:700;display:flex;align-items:center;justify-content:center;gap:4px;box-shadow:var(--shadow);min-height:50px}.next-btn{background:linear-gradient(135deg,var(--success),#218838);color:white;font-size:.95rem;font-weight:800;box-shadow:0 4px 15px rgba(40,167,69,0.3)}.clear-btn{background:linear-gradient(135deg,var(--error),#d32f2f);color:white}.payment-supplier-btn{background:linear-gradient(135deg,var(--primary),var(--primary-dark));color:white;font-size:.75rem}.sangria-btn{background:linear-gradient(135deg,var(--warning),#F57C00);color:white;font-size:.75rem}.close-turn-btn{background:linear-gradient(135deg,var(--text-light),#424242);color:white;font-size:.75rem}.history-btn{background:linear-gradient(135deg,var(--text-light),#424242);color:white;padding:10px;border:none;border-radius:var(--radius);font-weight:600;display:flex;align-items:center;justify-content:center;gap:4px;box-shadow:var(--shadow);font-size:.8rem;min-height:50px}.history-btn.pro{background:linear-gradient(135deg,var(--primary),var(--primary-dark))}.virtual-keyboard{position:fixed;inset:0;background:rgba(74,26,46,0.98);backdrop-filter:blur(15px);padding:20px;z-index:2000;display:none;justify-content:center;align-items:center}.virtual-keyboard.show{display:flex}.keyboard-container{background:white;border-radius:20px;padding:20px;width:100%;max-width:400px;box-shadow:0 10px 40px rgba(0,0,0,0.5)}.keyboard-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;padding-bottom:10px;border-bottom:2px solid var(--border)}.keyboard-title{font-weight:700;color:var(--text);font-size:1.1rem}.keyboard-close{background:var(--error);border:none;color:white;font-size:1.2rem;padding:8px 10px;border-radius:8px;font-weight:bold}.keyboard-display{background:linear-gradient(135deg,#fff9c4,#fff59d);padding:16px;border-radius:var(--radius);font-size:1.8rem;font-weight:800;text-align:center;margin-bottom:16px;border:3px solid #f9a825;min-height:70px;display:flex;align-items:center;justify-content:center;color:var(--primary)}.keyboard-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-bottom:16px}.keyboard-btn{aspect-ratio:1;font-size:1.4rem;font-weight:700;border:none;border-radius:var(--radius);background:linear-gradient(135deg,var(--primary),var(--primary-dark));color:white;box-shadow:0 4px 12px rgba(74,26,46,0.3);min-height:60px;display:flex;align-items:center;justify-content:center}.keyboard-actions{display:grid;grid-template-columns:1fr 2fr;gap:12px}.keyboard-cancel,.keyboard-confirm{border:none;border-radius:var(--radius);padding:16px;font-weight:700;font-size:1rem}.keyboard-cancel{background:linear-gradient(135deg,var(--error),#d32f2f);color:white}.keyboard-confirm{background:linear-gradient(135deg,var(--success),#218838);color:white}.notification{position:fixed;top:20px;left:50%;transform:translateX(-50%);background:white;border-radius:var(--radius);padding:16px 20px;box-shadow:0 4px 20px rgba(0,0,0,0.15);z-index:3000;display:none;align-items:center;gap:12px;min-width:280px;max-width:90vw}.notification.show{display:flex}.notification.error{border-left:4px solid var(--error);background:#fdf2f2}.notification.warning{border-left:4px solid var(--warning);background:#fffbf0}.notification.success{border-left:4px solid var(--success);background:#e8f5e9}.notification-icon{font-size:1.3rem}.notification.error .notification-icon{color:var(--error)}.notification.warning .notification-icon{color:var(--warning)}.notification.success .notification-icon{color:var(--success)}.notification-message{flex:1;font-weight:500;font-size:.95rem}.notification-close{background:none;border:none;font-size:1.1rem;color:var(--text-light);padding:4px;border-radius:4px}
  </style>
</head>
<body>
  <div class="turn-selection" id="turnSelection">
    <div class="turn-logo">F</div>
    <h2 class="turn-title">Bem-vindo ao Caixa Freitas</h2>
    <p class="turn-subtitle">Selecione o turno para come√ßar</p>
    <div class="turn-buttons">
      <button class="turn-btn" onclick="startTurn('morning')"><span>‚òÄÔ∏è</span> Turno da Manh√£</button>
      <button class="turn-btn" onclick="startTurn('afternoon')"><span>üåÖ</span> Turno da Tarde</button>
    </div>
  </div>
  <div id="mainApp">
    <header class="header">
      <h1>Caixa Freitas</h1>
      <div class="turno-info" id="turnInfo"><i class="fas fa-clock"></i><span id="turnText">Carregando...</span></div>
    </header>
    <div class="container">
      <section class="card">
        <h3 class="section-title"><i class="fas fa-bread-slice"></i> Produtos</h3>
        <div class="products-grid">
          <button class="product-btn" onclick="addProduct('P√£o de Sal', 0.70)"><span>P√£o de Sal</span><span class="price">R$ 0,70</span></button>
          <button class="product-btn" onclick="addProduct('P√£o Doce Comum', 0.70)"><span>P√£o Doce Comum</span><span class="price">R$ 0,70</span></button>
          <button class="product-btn" onclick="addProduct('P√£o Doce Especial', 0.80)"><span>P√£o Doce Especial</span><span class="price">R$ 0,80</span></button>
          <button class="product-btn others-btn" onclick="openKeyboard('others')"><span>Outros</span></button>
        </div>
      </section>
      <section class="card summary-section">
        <h3 class="section-title"><i class="fas fa-shopping-cart"></i> Pedido</h3>
        <div class="summary-list" id="summaryList">
          <div class="empty-cart"><i class="fas fa-shopping-cart"></i><p>Nenhum item adicionado</p></div>
        </div>
        <div class="total-section">
          <div class="total-amount">Total: <span id="totalAmount">R$ 0,00</span></div>
          <div class="payment-section">
            <h4 class="section-title"><i class="fas fa-credit-card"></i> Pagamento</h4>
            <div class="payment-methods">
              <button class="payment-btn" onclick="selectPayment('Cash')"><i class="fas fa-money-bill-wave"></i> Dinheiro</button>
              <button class="payment-btn" onclick="selectPayment('Card/PIX')"><i class="fas fa-credit-card"></i> Cart√£o/PIX</button>
            </div>
          </div>
          <div class="received-section" id="receivedSection">
            <input type="text" class="received-input" id="receivedInput" placeholder="Valor recebido" readonly onclick="openReceivedKeyboard()">
            <div class="change-amount" id="changeAmount"></div>
          </div>
          <div class="action-buttons">
            <button class="action-btn next-btn" onclick="processNext()"><i class="fas fa-check"></i> Pr√≥ximo Cliente</button>
            <button class="action-btn clear-btn" onclick="clearCart()"><i class="fas fa-trash"></i> Limpar</button>
            <button class="action-btn payment-supplier-btn" onclick="showNotification('Em desenvolvimento', 'warning')"><i class="fas fa-hand-holding-usd"></i> Pagamento</button>
          </div>
          <div class="action-buttons-row2">
            <button class="action-btn sangria-btn" onclick="showNotification('Em desenvolvimento', 'warning')"><i class="fas fa-money-bill-wave"></i> Sangria</button>
            <button class="action-btn close-turn-btn" onclick="closeTurn()"><i class="fas fa-times"></i> Fechar</button>
            <button class="history-btn" onclick="showNotification('Em desenvolvimento', 'warning')"><i class="fas fa-history"></i> Hist√≥rico</button>
            <button class="history-btn pro" onclick="showNotification('Em desenvolvimento', 'warning')"><i class="fas fa-chart-line"></i> Pro</button>
          </div>
        </div>
      </section>
    </div>
  </div>
  <div class="virtual-keyboard" id="virtualKeyboard">
    <div class="keyboard-container">
      <div class="keyboard-header"><span class="keyboard-title" id="keyboardTitle">Inserir valor</span><button class="keyboard-close" onclick="closeKeyboard()">√ó</button></div>
      <div class="keyboard-display" id="keyboardDisplay">0</div>
      <div class="keyboard-grid">
        <button class="keyboard-btn" onclick="inputDigit('1')">1</button>
        <button class="keyboard-btn" onclick="inputDigit('2')">2</button>
        <button class="keyboard-btn" onclick="inputDigit('3')">3</button>
        <button class="keyboard-btn" onclick="inputDigit('4')">4</button>
        <button class="keyboard-btn" onclick="inputDigit('5')">5</button>
        <button class="keyboard-btn" onclick="inputDigit('6')">6</button>
        <button class="keyboard-btn" onclick="inputDigit('7')">7</button>
        <button class="keyboard-btn" onclick="inputDigit('8')">8</button>
        <button class="keyboard-btn" onclick="inputDigit('9')">9</button>
        <button class="keyboard-btn" onclick="inputComma()">,</button>
        <button class="keyboard-btn" onclick="inputDigit('0')">0</button>
        <button class="keyboard-btn" onclick="backspace()"><i class="fas fa-backspace"></i></button>
      </div>
      <div class="keyboard-actions">
        <button class="keyboard-cancel" onclick="closeKeyboard()">Cancelar</button>
        <button class="keyboard-confirm" onclick="confirmKeyboard()">Confirmar</button>
      </div>
    </div>
  </div>
  <div class="notification" id="notification">
    <i class="notification-icon fas fa-exclamation-triangle"></i>
    <span class="notification-message" id="notificationMessage">Mensagem</span>
    <button class="notification-close" onclick="hideNotification()">√ó</button>
  </div>
  <script>
let cart=[];let total=0;let paymentMethod='';let currentTurn=null;let keyboardValue='';let keyboardTarget=null;let editIndex=null;let lastTapTime=0;document.addEventListener('touchend',function(e){const currentTime=new Date().getTime();const tapLength=currentTime-lastTapTime;if(tapLength<300&&tapLength>0){e.preventDefault()}lastTapTime=currentTime},false);document.addEventListener('dblclick',function(e){e.preventDefault()},false);document.addEventListener('gesturestart',function(e){e.preventDefault()},false);function startTurn(type){const now=new Date();currentTurn={type:type,startTime:now.toLocaleTimeString('pt-BR'),startDate:now.toLocaleDateString('pt-BR')};localStorage.setItem('activeTurn',JSON.stringify(currentTurn));document.getElementById('turnSelection').style.display='none';document.getElementById('mainApp').style.display='flex';updateTurnInfo();loadCart()}function updateTurnInfo(){if(!currentTurn)return;const emoji=currentTurn.type==='morning'?'‚òÄÔ∏è':'üåÖ';const name=currentTurn.type==='morning'?'Manh√£':'Tarde';document.getElementById('turnText').textContent=`${emoji} Turno da ${name} - ${currentTurn.startTime}`}function addProduct(label,price){const existing=cart.find(item=>item.label===label&&item.price===price);if(existing){existing.quantity+=1}else{cart.push({label,price,quantity:1,isOthers:label==='Outros'})}updateDisplay()}function removeItem(index){cart.splice(index,1);updateDisplay()}function updateDisplay(){renderCart();updateTotal();saveCart()}function renderCart(){const list=document.getElementById('summaryList');if(cart.length===0){list.innerHTML='<div class="empty-cart"><i class="fas fa-shopping-cart"></i><p>Nenhum item adicionado</p></div>';return}list.innerHTML=cart.map((item,i)=>`<div class="summary-item ${item.isOthers?'is-others':''}" onclick="editItem(${i})"><div class="item-info"><div class="item-label">${item.label}</div><div class="item-quantity">${item.quantity}x R$ ${item.price.toFixed(2).replace('.',',')}</div></div><div class="item-price">R$ ${(item.quantity*item.price).toFixed(2).replace('.',',')}</div><button class="delete-btn" onclick="event.stopPropagation(); removeItem(${i})"><i class="fas fa-trash"></i></button></div>`).join('')}function updateTotal(){total=cart.reduce((sum,item)=>sum+(item.quantity*item.price),0);document.getElementById('totalAmount').textContent=`R$ ${total.toFixed(2).replace('.',',')}`;if(paymentMethod==='Card/PIX'){document.getElementById('receivedInput').value=total.toFixed(2).replace('.',',')}if(paymentMethod==='Cash'){updateChange()}}function selectPayment(method){paymentMethod=method;document.querySelectorAll('.payment-btn').forEach(btn=>{btn.classList.remove('selected')});event.target.classList.add('selected');const section=document.getElementById('receivedSection');const input=document.getElementById('receivedInput');const change=document.getElementById('changeAmount');section.classList.add('show');if(method==='Card/PIX'){input.value=total.toFixed(2).replace('.',',');input.style.background='linear-gradient(135deg, #e8f5e8, #c8e6c9)';change.style.display='none'}else{input.value='';input.style.background='linear-gradient(135deg, #fff9c4, #fff59d)';change.style.display='block'}}function updateChange(){const input=document.getElementById('receivedInput');const change=document.getElementById('changeAmount');const received=parseFloat(input.value.replace(',','.'))||0;const diff=received-total;if(diff>=0){change.textContent=`Troco: R$ ${diff.toFixed(2).replace('.',',')}`;change.style.color='var(--success)'}else{change.textContent=`Falta: R$ ${Math.abs(diff).toFixed(2).replace('.',',')}`;change.style.color='var(--error)'}}function clearCart(){if(!confirm('Deseja limpar todo o carrinho?'))return;cart=[];total=0;paymentMethod='';updateDisplay();document.querySelectorAll('.payment-btn').forEach(btn=>{btn.classList.remove('selected')});document.getElementById('receivedSection').classList.remove('show');document.getElementById('receivedInput').value='';document.getElementById('changeAmount').textContent=''}function processNext(){if(cart.length===0){showNotification('Adicione itens ao carrinho','warning');return}if(!paymentMethod){showNotification('Selecione a forma de pagamento','warning');return}let received=total;if(paymentMethod==='Cash'){const input=document.getElementById('receivedInput');if(!input.value){showNotification('Informe o valor recebido','warning');return}received=parseFloat(input.value.replace(',','.'))||0;if(received<total){showNotification('Valor recebido √© menor que o total','error');return}}saveSale(received);clearCartSilent();showNotification('Venda processada com sucesso!','success')}function clearCartSilent(){cart=[];total=0;paymentMethod='';updateDisplay();document.querySelectorAll('.payment-btn').forEach(btn=>{btn.classList.remove('selected')});document.getElementById('receivedSection').classList.remove('show');document.getElementById('receivedInput').value='';document.getElementById('changeAmount').textContent=''}function saveSale(received){const now=new Date();const sale={id:Date.now(),items:[...cart],total:total,paymentMethod:paymentMethod,received:received,change:received-total,timestamp:now.toISOString(),date:now.toLocaleDateString('pt-BR'),time:now.toLocaleTimeString('pt-BR'),turn:currentTurn};const history=JSON.parse(localStorage.getItem('salesHistory')||'[]');history.unshift(sale);localStorage.setItem('salesHistory',JSON.stringify(history))}function saveCart(){localStorage.setItem('currentCart',JSON.stringify(cart))}function loadCart(){const saved=localStorage.getItem('currentCart');if(saved){cart=JSON.parse(saved);updateDisplay()}}function closeTurn(){if(!confirm('Deseja realmente fechar o turno atual?'))return;const now=new Date();const closed={...currentTurn,endTime:now.toLocaleTimeString('pt-BR'),endDate:now.toLocaleDateString('pt-BR'),closed:true};const history=JSON.parse(localStorage.getItem('turnHistory')||'[]');history.unshift(closed);localStorage.setItem('turnHistory',JSON.stringify(history));localStorage.removeItem('activeTurn');localStorage.removeItem('currentCart');clearCartSilent();document.getElementById('mainApp').style.display='none';document.getElementById('turnSelection').style.display='flex';showNotification('Turno fechado com sucesso!','success')}function openKeyboard(target){keyboardTarget=target;keyboardValue='';editIndex=null;const title=target==='others'?'Inserir pre√ßo do produto':'Inserir valor';document.getElementById('keyboardTitle').textContent=title;document.getElementById('keyboardDisplay').textContent='0';document.getElementById('virtualKeyboard').classList.add('show')}function openReceivedKeyboard(){if(paymentMethod==='Cash'){openKeyboard('received');document.getElementById('keyboardTitle').textContent='Inserir valor recebido'}}function closeKeyboard(){document.getElementById('virtualKeyboard').classList.remove('show');keyboardValue='';keyboardTarget=null;editIndex=null}function inputDigit(digit){keyboardValue+=digit;updateKeyboardDisplay()}function inputComma(){if(!keyboardValue.includes(',')&&keyboardValue.length>0){keyboardValue+=',';updateKeyboardDisplay()}}function backspace(){keyboardValue=keyboardValue.slice(0,-1);updateKeyboardDisplay()}function updateKeyboardDisplay(){document.getElementById('keyboardDisplay').textContent=keyboardValue||'0'}function confirmKeyboard(){const value=parseFloat(keyboardValue.replace(',','.'));if(isNaN(value)||value<=0){showNotification('Insira um valor v√°lido','warning');return}if(keyboardTarget==='others'){addProduct('Outros',value)}else if(keyboardTarget==='received'){document.getElementById('receivedInput').value=value.toFixed(2).replace('.',',');updateChange()}else if(keyboardTarget==='edit-quantity'){const qty=parseInt(keyboardValue);if(qty>0&&editIndex!==null){cart[editIndex].quantity=qty;updateDisplay()}}else if(keyboardTarget==='edit-price'){if(value>0&&editIndex!==null){cart[editIndex].price=value;updateDisplay()}}closeKeyboard()}function editItem(index){const item=cart[index];if(!item)return;editIndex=index;if(item.isOthers){keyboardTarget='edit-price';keyboardValue=item.price.toFixed(2).replace('.',',');document.getElementById('keyboardTitle').textContent='Editar pre√ßo: Outros';document.getElementById('keyboardDisplay').textContent=keyboardValue}else{keyboardTarget='edit-quantity';keyboardValue=item.quantity.toString();document.getElementById('keyboardTitle').textContent='Editar quantidade: '+item.label;document.getElementById('keyboardDisplay').textContent=keyboardValue}document.getElementById('virtualKeyboard').classList.add('show')}function showNotification(msg,type){const notif=document.getElementById('notification');const icon=notif.querySelector('.notification-icon');notif.className='notification '+type+' show';if(type==='error'){icon.className='notification-icon fas fa-times-circle'}else if(type==='warning'){icon.className='notification-icon fas fa-exclamation-triangle'}else{icon.className='notification-icon fas fa-check-circle'}document.getElementById('notificationMessage').textContent=msg;setTimeout(()=>notif.classList.remove('show'),3000)}function hideNotification(){document.getElementById('notification').classList.remove('show')}