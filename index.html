<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
<title>Caixa Freitas v9.0 Premium</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="css/styles.css">
<script type="module" src="js/main.js"></script>

    <!-- EmailJS -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
</head>
<body>

<div class="turn-selection" id="turnSelection">
<div class="turn-logo">F</div>
<h2 class="turn-title">Bem-vindo ao Caixa Freitas</h2>
<p class="turn-subtitle">Selecione o turno para come√ßar</p>
<div>
<button class="turn-btn" onclick="startTurn('morning')">‚òÄÔ∏è Turno da Manh√£</button>
<button class="turn-btn" onclick="startTurn('afternoon')">üåÖ Turno da Tarde</button>
</div>
</div>

<div id="mainApp">
<header class="header">
    <h1>Caixa Freitas</h1>
    <div class="turno-info">
        <i class="fas fa-clock"></i>
        <span id="turnText">Carregando...</span>
    </div>
    <button class="menu-toggle" onclick="toggleMenu()" aria-label="Menu">
        <i class="fas fa-ellipsis-v"></i>
    </button>
</header>

<!-- Menu Dropdown -->
<div class="dropdown-menu" id="dropdownMenu">
    <button class="menu-item" onclick="openPaymentModal(); closeMenu()">
        <i class="fas fa-hand-holding-usd"></i> Pagamento
    </button>
    <button class="menu-item" onclick="openWithdrawalModal(); closeMenu()">
        <i class="fas fa-money-bill-wave"></i> Sangria
    </button>
    <button class="menu-item" onclick="openHistoryModal(); closeMenu()">
        <i class="fas fa-history"></i> Hist√≥rico
    </button>
    <button onclick="window.openReports()" class="menu-item">
        <i class="fas fa-chart-bar"></i>
        <span>Relat√≥rios</span>
    </button>
    <button class="menu-item close-item" onclick="closeTurn(); closeMenu()">
        <i class="fas fa-times"></i> Fechar Turno
    </button>
</div>

<main class="content-wrapper">
    <div class="container">
        <section class="card">
            <h3 class="section-title"><i class="fas fa-bread-slice"></i> Produtos</h3>
            <div class="products-grid">
                <button class="product-btn" onclick="addProduct('P√£o de Sal', 0.70)">
                    <span>P√£o de Sal</span>
                    <span class="price">R$ 0,70</span>
                </button>
                <button class="product-btn" onclick="addProduct('P√£o Doce Comum', 0.70)">
                    <span>P√£o Doce Comum</span>
                    <span class="price">R$ 0,70</span>
                </button>
                <button class="product-btn" onclick="addProduct('P√£o Doce Especial', 0.80)">
                    <span>P√£o Doce Especial</span>
                    <span class="price">R$ 0,80</span>
                </button>
                <button class="product-btn others-btn" onclick="openKeyboard('others')">
                    <span>Outros</span>
                </button>
            </div>
        </section>

        <section class="card" id="order-section">
            <h3 class="section-title"><i class="fas fa-shopping-cart"></i> Pedido</h3>
            <div class="summary-list" id="summaryList">
                <div class="empty-cart">
                    <i class="fas fa-shopping-cart"></i>
                    <p>Nenhum item adicionado</p>
                </div>
            </div>

            <div class="payment-section">
                <div class="total-amount" id="totalAmountDiv">
                    Total: <span id="totalAmount">R$ 0,00</span>
                </div>

                <h4 class="section-title"><i class="fas fa-credit-card"></i> Pagamento</h4>
                <div class="payment-methods">
                    <button class="payment-btn" onclick="selectPayment('Cash')">
                        <i class="fas fa-money-bill-wave"></i> Dinheiro
                    </button>
                    <button class="payment-btn" onclick="selectPayment('Card/PIX')">
                        <i class="fas fa-credit-card"></i> Cart√£o/PIX
                    </button>
                </div>

                <div class="received-section" id="receivedSection">
                    <input type="text" class="received-input" id="receivedInput" 
                           placeholder="Valor recebido" readonly onclick="openReceivedKeyboard()">
                    <div class="change-amount" id="changeAmount"></div>
                </div>
            </div>
        </section>
    </div>
</main>

<div class="action-buttons">
    <button class="action-btn next-btn" onclick="processNext()">
        <i class="fas fa-check"></i> Pr√≥ximo Cliente
    </button>
    <button class="action-btn clear-btn" onclick="clearCart()">
        <i class="fas fa-trash"></i> Limpar
    </button>
</div>
</div>

<div class="modal-overlay" id="paymentModal">
<div class="modal-content">
<div class="modal-header">
<h3 class="modal-title">
<i class="fas fa-hand-holding-usd"></i> Pagamento a Fornecedor
</h3>
<button class="modal-close" onclick="closePaymentModal()">√ó</button>
</div>
<form onsubmit="submitPayment(event)">
<div class="form-group">
<label class="form-label">Nome do Representante/Fornecedor</label>
<input type="text" class="form-input" id="supplierName" required placeholder="Ex: Jo√£o Silva - Padaria Central">
</div>
<div class="form-group">
<label class="form-label">Valor Total do Pagamento *</label>
<input type="text" class="form-input" id="paymentValue" required placeholder="0,00" readonly onclick="openPaymentKeyboard()">
</div>
<div class="form-group">
<label class="form-label">Forma de Pagamento *</label>
<div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px">
<div class="form-checkbox payment-type-option" onclick="selectPaymentType('cash')" style="padding:12px">
<input type="radio" name="paymentType" id="paymentTypeCash" value="cash" required>
<label for="paymentTypeCash" style="font-size:.85rem;text-align:center">
üíµ Do Caixa
</label>
</div>
<div class="form-checkbox payment-type-option" onclick="selectPaymentType('external')" style="padding:12px">
<input type="radio" name="paymentType" id="paymentTypeExternal" value="external" required>
<label for="paymentTypeExternal" style="font-size:.85rem;text-align:center">
üè¶ Externo
</label>
</div>
<div class="form-checkbox payment-type-option" onclick="selectPaymentType('mixed')" style="padding:12px">
<input type="radio" name="paymentType" id="paymentTypeMixed" value="mixed" required>
<label for="paymentTypeMixed" style="font-size:.85rem;text-align:center">
üîÄ Misto
</label>
</div>
</div>
</div>

<div class="form-group" id="mixedPaymentSection" style="display:none">
<div style="background:linear-gradient(135deg,rgba(74,26,46,.1),rgba(107,40,67,.1));border-radius:12px;padding:16px;border:2px solid rgba(74,26,46,.3)">
<h4 style="font-weight:800;font-size:.95rem;margin-bottom:12px;color:#4a1a2e">
<i class="fas fa-calculator"></i> Divis√£o do Pagamento
</h4>
<div style="margin-bottom:12px">
<label class="form-label" style="font-size:.9rem">Valor do Caixa</label>
<input type="text" class="form-input" id="mixedCashValue" placeholder="0,00" readonly onclick="openMixedCashKeyboard()">
</div>
<div style="margin-bottom:12px">
<label class="form-label" style="font-size:.9rem">Valor Externo</label>
<input type="text" class="form-input" id="mixedExternalValue" placeholder="0,00" readonly onclick="openMixedExternalKeyboard()">
</div>
<div style="background:#fff;border-radius:8px;padding:12px;display:flex;justify-content:space-between;align-items:center;border:2px solid #4a1a2e">
<span style="font-weight:700;font-size:.9rem">Total Informado:</span>
<span id="mixedTotal" style="font-weight:900;font-size:1.1rem;color:#4a1a2e">R$ 0,00</span>
</div>
<div id="mixedWarning" style="display:none;margin-top:10px;padding:10px;background:rgba(229,57,53,0.1);border-radius:8px;border:2px solid rgba(229,57,53,0.3)">
<div style="display:flex;align-items:center;gap:6px;color:#E53935;font-weight:700;font-size:.85rem">
<i class="fas fa-exclamation-triangle"></i>
<span>A soma n√£o corresponde ao valor total!</span>
</div>
</div>
</div>
</div>

<div id="cashBalanceInfo" style="display:none;background:rgba(40,167,69,0.1);padding:12px;border-radius:8px;margin-bottom:16px;border:2px solid rgba(40,167,69,0.3)">
<div style="display:flex;justify-content:space-between;align-items:center">
<span style="font-weight:700;color:#28a745">
<i class="fas fa-wallet"></i> Saldo em Caixa:
</span>
<span id="currentCashBalance" style="font-weight:900;font-size:1.1rem;color:#28a745">R$ 0,00</span>
</div>
</div>

<div class="form-actions">
<button type="button" class="btn-cancel" onclick="closePaymentModal()">Cancelar</button>
<button type="submit" class="btn-submit">
<i class="fas fa-check"></i> Registrar Pagamento
</button>
</div>
</form>
</div>
</div>

<div class="modal-overlay" id="withdrawalModal">
<div class="modal-content">
<div class="modal-header">
<h3 class="modal-title">
<i class="fas fa-money-bill-wave"></i> Sangria - Retirada de Caixa
</h3>
<button class="modal-close" onclick="closeWithdrawalModal()">√ó</button>
</div>
<form onsubmit="submitWithdrawal(event)">
<div class="form-group">
<label class="form-label">Valor da Sangria</label>
<input type="text" class="form-input" id="withdrawalValue" required placeholder="0,00" readonly onclick="openWithdrawalKeyboard()">
</div>
<div class="form-group">
<label class="form-label">Motivo (opcional)</label>
<input type="text" class="form-input" id="withdrawalReason" placeholder="Ex: Troco, Dep√≥sito banc√°rio, etc.">
</div>
<div style="background:rgba(229,57,53,0.1);padding:12px;border-radius:8px;margin-bottom:16px;border:2px solid rgba(229,57,53,0.3)">
<div style="display:flex;align-items:center;gap:8px;color:#E53935;font-weight:700">
<i class="fas fa-exclamation-triangle"></i>
<span>Este valor ser√° abatido do caixa automaticamente</span>
</div>
</div>
<div class="form-actions">
<button type="button" class="btn-cancel" onclick="closeWithdrawalModal()">Cancelar</button>
<button type="submit" class="btn-submit">
<i class="fas fa-check"></i> Confirmar Sangria
</button>
</div>
</form>
</div>
</div>

<div class="modal-overlay" id="historyModal">
<div class="modal-content">
<div class="modal-header">
<h3 class="modal-title">
<i class="fas fa-history"></i> Hist√≥rico do Turno
</h3>
<button class="modal-close" onclick="closeHistoryModal()">√ó</button>
</div>

<div class="summary-box">
<div class="summary-row">
<span><i class="fas fa-money-bill-wave"></i> Total em Dinheiro:</span>
<strong id="historyCash">R$ 0,00</strong>
</div>
<div class="summary-row">
<span><i class="fas fa-credit-card"></i> Total em Cart√£o/PIX:</span>
<strong id="historyCard">R$ 0,00</strong>
</div>
<div class="summary-row">
<span><i class="fas fa-hand-holding-usd"></i> Pagamentos (do caixa):</span>
<strong id="historyPaymentsCash" style="color:#E53935">R$ 0,00</strong>
</div>
<div class="summary-row">
<span><i class="fas fa-hand-holding-usd"></i> Pagamentos (externos):</span>
<strong id="historyPaymentsExternal" style="color:#6c757d">R$ 0,00</strong>
</div>
<div class="summary-row">
<span><i class="fas fa-money-bill-wave"></i> Sangrias:</span>
<strong id="historyWithdrawals" style="color:#E53935">R$ 0,00</strong>
</div>
<div class="summary-row total">
<span>üí∞ Total de Vendas:</span>
<span id="historyTotal">R$ 0,00</span>
</div>
<div class="summary-row">
<span>üíµ Dinheiro em Caixa:</span>
<strong id="historyCashBalance" style="color:#28a745">R$ 0,00</strong>
</div>
</div>

<h4 style="font-weight:800;margin-bottom:12px;color:#2c3e50">
<i class="fas fa-list"></i> Movimenta√ß√µes do Turno
</h4>
<div class="history-list" id="historyList"></div>
</div>
</div>

<div class="modal-overlay" id="proPasswordModal">
<div class="modal-content" style="max-width:400px">
<div class="modal-header">
<h3 class="modal-title">
<i class="fas fa-lock"></i> Acesso Pro
</h3>
<button class="modal-close" onclick="closeProPasswordModal()">√ó</button>
</div>
<div style="text-align:center;margin-bottom:20px">
<i class="fas fa-shield-alt" style="font-size:3rem;color:#4a1a2e;margin-bottom:10px"></i>
<p style="color:#6c757d;font-size:.95rem">Digite a senha de acesso ao hist√≥rico profissional</p>
</div>
<form onsubmit="validateProPassword(event)">
<div class="form-group">
<label class="form-label">Senha de Acesso</label>
<input type="password" class="form-input" id="proPassword" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="off">
</div>
<div id="proPasswordError" style="display:none;background:rgba(229,57,53,0.1);padding:12px;border-radius:8px;margin-bottom:16px;border:2px solid rgba(229,57,53,0.3)">
<div style="display:flex;align-items:center;gap:8px;color:#E53935;font-weight:700;font-size:.9rem">
<i class="fas fa-exclamation-circle"></i>
<span>Senha incorreta! Tente novamente.</span>
</div>
</div>
<div class="form-actions">
<button type="button" class="btn-cancel" onclick="closeProPasswordModal()">Cancelar</button>
<button type="submit" class="btn-submit">
<i class="fas fa-unlock"></i> Acessar
</button>
</div>
</form>
</div>
</div>

<div class="modal-overlay" id="proHistoryModal">
<div class="modal-content" style="max-width:600px">
<div class="modal-header">
<h3 class="modal-title">
<i class="fas fa-chart-line"></i> Hist√≥rico Profissional
</h3>
<button class="modal-close" onclick="closeProHistoryModal()">√ó</button>
</div>

<div style="background:linear-gradient(135deg,#4a1a2e,#2d0f1c);border-radius:12px;padding:16px;margin-bottom:20px;color:#fff">
<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
<span style="font-weight:700;font-size:.9rem">Resumo Geral dos Turnos</span>
<i class="fas fa-chart-pie" style="font-size:1.5rem;opacity:.5"></i>
</div>
<div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:12px">
<div style="background:rgba(255,255,255,.15);border-radius:8px;padding:10px">
<div style="font-size:.75rem;opacity:.8;margin-bottom:4px">‚òÄÔ∏è Turno Manh√£</div>
<div style="font-size:1.2rem;font-weight:900" id="proMorningTotal">R$ 0,00</div>
</div>
<div style="background:rgba(255,255,255,.15);border-radius:8px;padding:10px">
<div style="font-size:.75rem;opacity:.8;margin-bottom:4px">üåÖ Turno Tarde</div>
<div style="font-size:1.2rem;font-weight:900" id="proAfternoonTotal">R$ 0,00</div>
</div>
</div>
</div>

<div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:20px">
<button class="action-btn" style="background:linear-gradient(135deg,#28a745,#218838);color:#fff" onclick="showProTurn('morning')">
<i class="fas fa-sun"></i> Ver Manh√£
</button>
<button class="action-btn" style="background:linear-gradient(135deg,#FF9800,#F57C00);color:#fff" onclick="showProTurn('afternoon')">
<i class="fas fa-cloud-sun"></i> Ver Tarde
</button>
</div>

<div id="proTurnDetails" style="display:none">
<h4 style="font-weight:800;margin-bottom:12px;color:#2c3e50;display:flex;align-items:center;gap:8px">
<i class="fas fa-list-alt"></i> <span id="proTurnTitle">Detalhes do Turno</span>
</h4>

<div class="summary-box">
<div class="summary-row">
<span><i class="fas fa-money-bill-wave"></i> Vendas em Dinheiro:</span>
<strong id="proTurnCash">R$ 0,00</strong>
</div>
<div class="summary-row">
<span><i class="fas fa-credit-card"></i> Vendas Cart√£o/PIX:</span>
<strong id="proTurnCard">R$ 0,00</strong>
</div>
<div class="summary-row">
<span><i class="fas fa-hand-holding-usd"></i> Pagamentos (caixa):</span>
<strong id="proTurnPaymentsCash" style="color:#E53935">R$ 0,00</strong>
</div>
<div class="summary-row">
<span><i class="fas fa-hand-holding-usd"></i> Pagamentos (externos):</span>
<strong id="proTurnPaymentsExt" style="color:#6c757d">R$ 0,00</strong>
</div>
<div class="summary-row">
<span><i class="fas fa-money-bill-wave"></i> Sangrias:</span>
<strong id="proTurnWithdrawals" style="color:#E53935">R$ 0,00</strong>
</div>
<div class="summary-row total">
<span>üí∞ Total de Vendas:</span>
<span id="proTurnTotalSales">R$ 0,00</span>
</div>
<div class="summary-row">
<span>üíµ Dinheiro em Caixa:</span>
<strong id="proTurnCashBalance" style="color:#28a745">R$ 0,00</strong>
</div>
<div class="summary-row" style="border-top:2px solid #4a1a2e;padding-top:10px;margin-top:10px">
<span style="font-weight:900">üìä Total de Movimenta√ß√µes:</span>
<strong id="proTurnMovements" style="color:#4a1a2e">0</strong>
</div>
</div>
</div>

<div style="margin-top:20px;padding:12px;background:rgba(74,26,46,0.05);border-radius:8px;border:2px solid rgba(74,26,46,0.2)">
<div style="display:flex;align-items:center;gap:8px;color:#4a1a2e;font-weight:700;font-size:.85rem">
<i class="fas fa-info-circle"></i>
<span>Dados consolidados de todos os turnos do dia</span>
</div>
</div>
</div>
</div>

<div class="virtual-keyboard" id="virtualKeyboard">
<div class="keyboard-container">
<div class="keyboard-header">
<span class="keyboard-title" id="keyboardTitle">Inserir valor</span>
<button class="keyboard-close" onclick="closeKeyboard()">√ó</button>
</div>
<div class="keyboard-display" id="keyboardDisplay">0</div>
<div class="keyboard-grid">
<button class="keyboard-btn" onclick="inputDigit('1')">1</button>
<button class="keyboard-btn" onclick="inputDigit('2')">2</button>
<button class="keyboard-btn" onclick="inputDigit('3')">3</button>
<button class="keyboard-btn" onclick="inputDigit('4')">4</button>
<button class="keyboard-btn" onclick="inputDigit('5')">5</button>
<button class="keyboard-btn" onclick="inputDigit('6')">6</button>
<button class="keyboard-btn" onclick="inputDigit('7')">7</button>
<button class="keyboard-btn" onclick="inputDigit('8')">8</button>
<button class="keyboard-btn" onclick="inputDigit('9')">9</button>
<button class="keyboard-btn" onclick="inputComma()">,</button>
<button class="keyboard-btn" onclick="inputDigit('0')">0</button>
<button class="keyboard-btn" onclick="backspace()">
<i class="fas fa-backspace"></i>
</button>
</div>
<div class="keyboard-actions">
<button class="keyboard-cancel" onclick="closeKeyboard()">Cancelar</button>
<button class="keyboard-confirm" onclick="confirmKeyboard()">Confirmar</button>
</div>
</div>
</div>

<div class="notification" id="notification">
<i class="notification-icon fas fa-exclamation-triangle"></i>
<span class="notification-message" id="notificationMessage">Mensagem</span>
<button class="notification-close" onclick="hideNotification()">√ó</button>
</div>

<div id="printArea" style="display:none"></div>

<!-- ========================================
     üîê MODAIS DE AUTENTICA√á√ÉO
     ======================================== -->

<!-- Modal: Primeiro Acesso - Configurar Senha -->
<div id="setupModal" class="modal">
    <div class="modal-content" style="max-width: 450px;">
        <div style="text-align: center; margin-bottom: 20px;">
            <i class="fas fa-key" style="font-size: 3rem; color: var(--primary-color);"></i>
            <h2 style="margin: 10px 0;">Bem-vindo! üéâ</h2>
            <p style="color: #666;">Configure sua senha e e-mail de administrador</p>
        </div>
        
        <div style="margin-bottom: 20px;">
            <label style="display: block; margin-bottom: 5px; font-weight: 600;">
                <i class="fas fa-envelope"></i> E-mail
            </label>
            <input 
                type="email" 
                id="setupEmail" 
                placeholder="seu@email.com"
                style="width: 100%; padding: 12px; font-size: 1rem; border: 2px solid #ddd; border-radius: 8px; margin-bottom: 15px;"
            >
            
            <label style="display: block; margin-bottom: 5px; font-weight: 600;">
                <i class="fas fa-lock"></i> Senha
            </label>
            <input 
                type="password" 
                id="setupPassword" 
                placeholder="M√≠nimo 4 caracteres"
                style="width: 100%; padding: 12px; font-size: 1rem; border: 2px solid #ddd; border-radius: 8px; margin-bottom: 15px;"
            >
            
            <label style="display: block; margin-bottom: 5px; font-weight: 600;">
                <i class="fas fa-lock"></i> Confirmar Senha
            </label>
            <input 
                type="password" 
                id="setupPasswordConfirm" 
                placeholder="Digite a senha novamente"
                style="width: 100%; padding: 12px; font-size: 1rem; border: 2px solid #ddd; border-radius: 8px;"
            >
            
            <p id="setupError" style="color: red; margin-top: 10px; display: none;"></p>
        </div>
        
        <button onclick="window.submitSetup()" class="btn-primary" style="width: 100%;">
            <i class="fas fa-check"></i> Configurar e Continuar
        </button>
    </div>
</div>

<!-- Modal: Login Normal -->
<div id="loginModal" class="modal">
    <div class="modal-content" style="max-width: 400px;">
        <div style="text-align: center; margin-bottom: 20px;">
            <i class="fas fa-lock" style="font-size: 3rem; color: var(--primary-color);"></i>
            <h2 style="margin: 10px 0;">Acesso aos Relat√≥rios</h2>
            <p style="color: #666;">Digite a senha de administrador</p>
        </div>
        
        <div style="margin-bottom: 20px;">
            <input 
                type="password" 
                id="loginPassword" 
                placeholder="Digite a senha"
                style="width: 100%; padding: 12px; font-size: 1rem; border: 2px solid #ddd; border-radius: 8px;"
            >
            <p id="loginError" style="color: red; margin-top: 10px; display: none;"></p>
        </div>
        
        <div style="display: flex; gap: 10px;">
            <button onclick="window.closeLoginModal()" class="btn-secondary" style="flex: 1;">
                Cancelar
            </button>
            <button onclick="window.attemptLogin()" class="btn-primary" style="flex: 1;">
                <i class="fas fa-sign-in-alt"></i> Entrar
            </button>
        </div>
        
        <div style="text-align: center; margin-top: 15px;">
            <a href="#" onclick="window.openRecoveryModal(); return false;" style="color: var(--primary-color); text-decoration: none;">
                <i class="fas fa-question-circle"></i> Esqueci minha senha
            </a>
        </div>
    </div>
</div>

<!-- Modal: Recupera√ß√£o de Senha - Solicitar C√≥digo -->
<div id="recoveryModal" class="modal">
    <div class="modal-content" style="max-width: 400px;">
        <div style="text-align: center; margin-bottom: 20px;">
            <i class="fas fa-envelope-open-text" style="font-size: 3rem; color: var(--warning-color);"></i>
            <h2 style="margin: 10px 0;">Recuperar Senha</h2>
            <p style="color: #666;">Digite o e-mail cadastrado</p>
        </div>
        
        <div style="margin-bottom: 20px;">
            <input 
                type="email" 
                id="recoveryEmail" 
                placeholder="seu@email.com"
                style="width: 100%; padding: 12px; font-size: 1rem; border: 2px solid #ddd; border-radius: 8px;"
            >
            <p id="recoveryError" style="color: red; margin-top: 10px; display: none;"></p>
            <p id="recoverySuccess" style="color: green; margin-top: 10px; display: none;"></p>
        </div>
        
        <div style="display: flex; gap: 10px;">
            <button onclick="window.closeRecoveryModal()" class="btn-secondary" style="flex: 1;">
                Cancelar
            </button>
            <button onclick="window.requestRecoveryCode()" class="btn-primary" style="flex: 1;">
                <i class="fas fa-paper-plane"></i> Enviar C√≥digo
            </button>
        </div>
    </div>
</div>

<!-- Modal: Validar C√≥digo e Nova Senha -->
<div id="resetPasswordModal" class="modal">
    <div class="modal-content" style="max-width: 450px;">
        <div style="text-align: center; margin-bottom: 20px;">
            <i class="fas fa-shield-alt" style="font-size: 3rem; color: var(--success-color);"></i>
            <h2 style="margin: 10px 0;">Nova Senha</h2>
            <p style="color: #666;">Digite o c√≥digo recebido por e-mail</p>
        </div>
        
        <div style="margin-bottom: 20px;">
            <label style="display: block; margin-bottom: 5px; font-weight: 600;">
                <i class="fas fa-key"></i> C√≥digo de Recupera√ß√£o
            </label>
            <input 
                type="text" 
                id="resetCode" 
                placeholder="000000"
                maxlength="6"
                style="width: 100%; padding: 12px; font-size: 1.5rem; text-align: center; border: 2px solid #ddd; border-radius: 8px; letter-spacing: 0.3em; margin-bottom: 15px;"
            >
            
            <label style="display: block; margin-bottom: 5px; font-weight: 600;">
                <i class="fas fa-lock"></i> Nova Senha
            </label>
            <input 
                type="password" 
                id="resetPassword" 
                placeholder="M√≠nimo 4 caracteres"
                style="width: 100%; padding: 12px; font-size: 1rem; border: 2px solid #ddd; border-radius: 8px; margin-bottom: 15px;"
            >
            
            <label style="display: block; margin-bottom: 5px; font-weight: 600;">
                <i class="fas fa-lock"></i> Confirmar Nova Senha
            </label>
            <input 
                type="password" 
                id="resetPasswordConfirm" 
                placeholder="Digite a senha novamente"
                style="width: 100%; padding: 12px; font-size: 1rem; border: 2px solid #ddd; border-radius: 8px;"
            >
            
            <p id="resetError" style="color: red; margin-top: 10px; display: none;"></p>
        </div>
        
        <div style="display: flex; gap: 10px;">
            <button onclick="window.closeResetPasswordModal()" class="btn-secondary" style="flex: 1;">
                Cancelar
            </button>
            <button onclick="window.submitNewPassword()" class="btn-primary" style="flex: 1;">
                <i class="fas fa-check"></i> Redefinir Senha
            </button>
        </div>
    </div>
</div>
</body>
</html>